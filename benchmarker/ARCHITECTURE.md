# 概要
benchmarkerは`ターゲットAPIに対して「初期化シナリオ」「負荷シナリオ」「最終検証シナリオ」を行い、結果を出力する`コマンドラインツールである。

## ベンチマークの流れ

 **1. 初期化シナリオ(prepare)**
 - 計測対象のアプリケーションの初期化を行う
 - fast-failのために各エンドポイントのアクセス制御を検証する
   - 短時間で簡易ベンチマークシナリオを1周させる
     1. 初期化
     2. 履修登録1件
     3. 講義開始1件
     4. 成績取得1件

 **2. 負荷シナリオ(load)**
 - T.B.D.
 
 **3. 最終検証シナリオ(validation)**
 - 負荷シナリオで操作したデータの検証を行う
 - T.B.D.

## 全体構成

 - main.go
   - コマンドラインツールとしての入力をうけとる
   - scenarioでベンチマークシナリオを走らせて結果をうけとる
   - 結果をポータル向けに整形して出力
 - scenario
   - ベンチマークシナリオを管理
   - 主にシナリオ関数(prepare.go, load.go, validation.go)とそれを実現するアクション関数(action.go)が存在
   - アクション関数はシナリオ関数の可読性のためにユーザの動作をまとめている。
   - シナリオ関数とアクション関数はやや責務が曖昧。シナリオ関数が読みやすくなればいいかな程度でアクション関数をまとめた。
 - api
   - アプリケーションとのインターフェース部分
   - APIへのリクエストからHTTP statusの検証とレスポンスボディのパースまでが責務
   - リクエストが成功/失敗くらいまで興味がある
 - model
   - アプリケーションが持っているデータ。検証のためベンチ側でも保持する。
   - UIで表示されるものやベンチが操作するデータなど、検証に利用するデータを保持する。アプリケーションDBを全部もつわけではない。
   - ex) Student(StudentID, PW, 名前, 履修登録データ, 成績), Course(講義名, 履修条件), Class(提出された課題, 出席状況), etc...
 - random
   - アプリケーションに入力するデータを乱数で生成
   - ex) 課題ファイル
