(window.webpackJsonp=window.webpackJsonp||[]).push([[24,4,6,7,12,17,23],{245:function(e,n,t){"use strict";t.r(n);var r=t(0).a.extend({}),o=t(20),component=Object(o.a)(r,(function(){var e=this,n=e.$createElement;return(e._self._c||n)("div",{staticClass:"bg-white shadow-lg px-6 py-4"},[e._t("default")],2)}),[],!1,null,null,null);n.default=component.exports},249:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t(68);function r(title){var body=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"Notification"in window?"granted"===Notification.permission?o(title,body):Notification.requestPermission().then((function(e){"granted"===e&&o(title,body)})):console.log("This browser does not support notifications")}function o(title,body){var e={};body&&(e.body=body);var n=new Notification(title,e);setTimeout(n.close.bind(n),4e3)}},251:function(e,n,t){"use strict";t.r(n);var r=t(0).a.extend({props:{id:{type:String,required:!0},type:{type:String,default:"text"},label:{type:String,required:!0},labelDirection:{type:String,default:"horizontal"},placeholder:{type:String,default:""},value:{type:String,default:""}},computed:{wrapperClass:function(){return"vertical"===this.labelDirection?["flex-col"]:["items-center"]},labelClass:function(){return"vertical"===this.labelDirection?[]:["w-1/6"]}}}),o=t(20),component=Object(o.a)(r,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"flex flex-auto",class:e.wrapperClass},[t("div",{staticClass:"flex-shrink-0 mr-2",class:e.labelClass},[t("label",{staticClass:"text-gray-500 font-bold text-right",attrs:{for:e.id}},[e._v("\n      "+e._s(e.label)+"\n    ")])]),e._v(" "),t("div",{staticClass:"w-full"},[t("input",{staticClass:"\n        w-full\n        bg-white\n        appearance-none\n        border-2 border-gray-200\n        rounded\n        py-2\n        px-4\n        text-gray-700\n        leading-tight\n        focus:outline-none focus:bg-white focus:border-purple-500\n      ",attrs:{id:e.id,type:e.type,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(n){return e.$emit("input",n.target.value)}}})])])}),[],!1,null,null,null);n.default=component.exports},254:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(245),c=r.a.extend({name:"Accordion",components:{Card:o.default},data:function(){return{isOpen:!1}},methods:{toggle:function(){var e=this;this.isOpen?this.$emit("close",{done:function(){return e.isOpen=!e.isOpen}}):this.$emit("open",{done:function(){return e.isOpen=!e.isOpen}})}}}),l=t(20),component=Object(l.a)(c,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("Card",[t("div",{staticClass:"flex flex-col justify-between leading-normal"},[t("a",{staticClass:"p-4 block bg-white no-underline text-black",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.toggle.apply(null,arguments)}}},[e._t("header"),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"p-2"},[e._t("default")],2),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isOpen,expression:"!isOpen"}],staticClass:"text-primary-500"},[e._v("▼ 詳細を見る")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"text-primary-500"},[e._v("▲ 閉じる")])],2)])])}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{Card:t(245).default})},255:function(e,n,t){"use strict";t.r(n);var r=t(0).a.extend({name:"Pagination",props:{prevDisabled:{type:Boolean,required:!1,default:function(){return!1}},nextDisabled:{type:Boolean,required:!1,default:function(){return!1}}},computed:{prevClasses:function(){return this.getClasses(this.prevDisabled)},nextClasses:function(){return this.getClasses(this.nextDisabled)}},methods:{getClasses:function(e){return e?["text-gray-500"]:["cursor-pointer","text-black","hover:bg-primary-300","hover:text-white","hover:rounded"]}}}),o=t(20),component=Object(o.a)(r,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"flex flex-row items-center"},[t("div",{staticClass:"p-2 mr-6",class:e.prevClasses,on:{click:function(n){!e.prevDisabled&&e.$emit("goPrev")}}},[t("fa-icon",{staticClass:"mr-2",attrs:{icon:"chevron-left",size:"lg"}}),e._v(" "),t("span",{staticClass:"text-base"},[e._v(" Prev ")])],1),e._v(" "),t("div",{staticClass:"p-2",class:e.nextClasses,on:{click:function(n){!e.nextDisabled&&e.$emit("goNext")}}},[t("span",{staticClass:"text-base mr-2"},[e._v(" Next ")]),e._v(" "),t("fa-icon",{attrs:{icon:"chevron-right",size:"lg"}})],1)])}),[],!1,null,null,null);n.default=component.exports},256:function(e,n,t){"use strict";var r=t(2),o=t(259);r({target:"String",proto:!0,forced:t(260)("link")},{link:function(e){return o(this,"a","href",e)}})},258:function(e,n,t){"use strict";var r=t(2),o=t(71).find,c=t(120),l="find",d=!0;l in[]&&Array(1).find((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},259:function(e,n,t){var r=t(17),o=/"/g;e.exports=function(e,n,t,c){var l=String(r(e)),d="<"+n;return""!==t&&(d+=" "+t+'="'+String(c).replace(o,"&quot;")+'"'),d+">"+l+"</"+n+">"}},260:function(e,n,t){var r=t(4);e.exports=function(e){return r((function(){var n=""[e]('"');return n!==n.toLowerCase()||n.split('"').length>3}))}},261:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));t(45),t(121),t(11),t(21),t(28),t(178),t(67),t(119),t(37),t(27),t(38),t(29),t(39),t(40);function r(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,d=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){d=!0,c=e},f:function(){try{l||null==t.return||t.return()}finally{if(d)throw c}}}}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function c(e){var n={prev:"",next:""};if(!e)return n;var t,o=r(e.split(","));try{for(o.s();!(t=o.n()).done;){var link=t.value,c=/<([^>]+)>;\s+rel="([^"]+)"/gi.exec(link);if(c&&("prev"===c[2]||"next"===c[2])){var l=new URL(c[1]);n[c[2]]="".concat(l.pathname).concat(l.search)}}}catch(e){o.e(e)}finally{o.f()}return n}},264:function(e,n,t){"use strict";t.r(n);t(256);var r=t(0),o=t(265),c=t(255),l=t(261),d=r.a.extend({components:{AnnouncementCard:o.default,Pagination:c.default},props:{announcements:{type:Array,required:!0},link:{type:String,required:!1,default:""}},data:function(){return{parsedLink:{prev:"",next:""}}},created:function(){this.link&&(this.parsedLink=Object(l.a)(this.link))}}),f=t(20),component=Object(f.a)(d,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"mb-6"},e._l(e.announcements,(function(n){return t("AnnouncementCard",{key:n.id,attrs:{announcement:n},on:{open:function(t){return e.$emit("open",t,n)},close:function(n){return e.$emit("close",n)}}})})),1),e._v(" "),t("div",{staticClass:"flex justify-center"},[t("Pagination",{attrs:{"prev-disabled":!Boolean(e.parsedLink.prev),"next-disabled":!Boolean(e.parsedLink.next)},on:{goPrev:function(n){return e.$emit("movePage",e.parsedLink.prev)},goNext:function(n){return e.$emit("movePage",e.parsedLink.next)}}})],1)])}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{Pagination:t(255).default})},265:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(254),c=r.a.extend({name:"Announcement",components:{Accordion:o.default},props:{announcement:{type:Object,required:!0}},data:function(){return{}}}),l=t(20),component=Object(l.a)(c,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"mt-2 flex-grow-0"},[t("Accordion",{on:{open:function(n){return e.$emit("open",n)},close:function(n){return e.$emit("close",n)}},scopedSlots:e._u([{key:"header",fn:function(){return[t("p",{staticClass:"text-2xl text-primary-500 font-bold flex items-center"},[e._v("\n        "+e._s(e.announcement.courseName)+" "+e._s(e.announcement.title)+"\n      ")]),e._v(" "),t("div",{staticClass:"text-neutral-300 text-sm mb-4"},[e._v("\n        "+e._s(e.announcement.createdAt)+"\n      ")])]},proxy:!0},{key:"default",fn:function(){return[t("p",{staticClass:"text-black text-base break-all mb-4"},[e._v("\n        "+e._s(e.announcement.message||"")+"\n      ")])]},proxy:!0}])})],1)}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{Accordion:t(254).default})},270:function(e,n,t){var r=t(2),o=t(180).values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},283:function(e,n,t){"use strict";t.r(n);var r=t(6),o=(t(43),t(256),t(44),t(270),t(258),t(41),t(0)),c=t(249),l=t(245),d=t(251),f=t(264),m=o.a.extend({key:function(e){return e.fullPath},components:{Card:l.default,TextField:d.default,AnnouncementList:f.default},middleware:"is_loggedin",asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function n(){var t,r,path,o,c,link,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.$axios,r=e.query,path=r.path?r.path:"/api/announcements",n.next=4,t.get(path);case 4:return o=n.sent,c=o.data,link=o.headers.link,l=Object.values(c.announcements).map((function(e){return{id:e.id,courseId:e.courseId,courseName:e.courseName,title:e.title,unread:e.unread,createdAt:new Date(1e3*e.createdAt).toLocaleString()}})),d=c.unreadCount,n.abrupt("return",{innerAnnouncements:l,numOfUnreads:d,link:link});case 10:case"end":return n.stop()}}),n)})))()},data:function(){return{innerAnnouncements:[],announcements:[],courseName:"",numOfUnreads:0,showUnreads:!1,link:""}},computed:{unreadFilterClasses:function(){return this.showUnreads?["bg-primary-500","text-white"]:["bg-white","text-black"]}},watchQuery:["path"],created:function(){this.announcements=this.innerAnnouncements},methods:{openAnnouncement:function(e,n){var t=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$get("/api/announcements/".concat(n.id));case 3:o=r.sent,(l=t.innerAnnouncements.find((function(e){return e.id===n.id})))&&(l.message=o.message),n.unread&&(t.numOfUnreads=t.numOfUnreads-1,n.unread=!1),e.done(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),Object(c.a)("お知らせの取得に失敗しました");case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},closeAnnouncement:function(e){e.done()},filterAnnouncements:function(){var e=this;this.announcements=this.innerAnnouncements.filter((function(n){return 0===n.courseName.indexOf(e.courseName)})),this.showUnreads&&(this.announcements=this.announcements.filter((function(e){return e.unread})))},toggleUnreadFilter:function(){this.showUnreads=!this.showUnreads,this.filterAnnouncements()},paginate:function(path){this.$router.push("/announce?path=".concat(encodeURIComponent(path)))}}}),v=t(20),component=Object(v.a)(m,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"w-8/12"},[t("Card",[t("div",{staticClass:"flex-1 flex-col"},[t("div",{staticClass:"flex flex-row items-center mb-4"},[t("h1",{staticClass:"text-2xl font-bold mr-4"},[e._v("お知らせ一覧")]),e._v(" "),t("div",{staticClass:"border border-gray-400 pl-1 pr-1 mr-4 cursor-pointer",class:e.unreadFilterClasses,on:{click:e.toggleUnreadFilter}},[t("span",{staticClass:"text-sm"},[e._v("未読")]),e._v(" "),t("span",{staticClass:"bg-primary-800 text-white font-bold text-sm pl-1 pr-1"},[e._v(e._s(e.numOfUnreads))])]),e._v(" "),t("TextField",{attrs:{id:"input-course-name",label:"",type:"text",placeholder:"科目名で絞り込み"},on:{input:e.filterAnnouncements},model:{value:e.courseName,callback:function(n){e.courseName=n},expression:"courseName"}})],1),e._v(" "),t("AnnouncementList",{attrs:{announcements:e.announcements,link:e.link},on:{movePage:e.paginate,open:e.openAnnouncement,close:e.closeAnnouncement}})],1)])],1)])}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{TextField:t(251).default,AnnouncementList:t(264).default,Card:t(245).default})}}]);